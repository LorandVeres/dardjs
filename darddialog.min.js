function dialog(o,m){var l={},A=counter(),v,q="dard_d_bd"+new Date().getTime();m.keyIn("drag")&&m.drag==true?v=true:v=false;function E(J){function H(){l.d=document.createElement("div");l.h=document.createElement("div");l.ct=document.createElement("div");l.bt=document.createElement("div");l.m=document.createElement("div");l.mx=document.createElement("div");l.bd=document.createElement("div");l.f=document.createElement("div")}function G(){l.ct.appendChild(l.bt);l.ct.appendChild(l.mx);l.ct.appendChild(l.m);l.h.appendChild(l.ct);l.d.appendChild(l.h);l.d.appendChild(l.bd);l.d.appendChild(l.f);l.d.setAttribute("id",q);l.d.setAttribute("class","dard_d_box");l.h.setAttribute("class","dard_d_hd");l.ct.setAttribute("class","dard_d_ct");l.bt.setAttribute("class","dard_d_bt");l.m.setAttribute("class","dard_d_bt");l.mx.setAttribute("class","dard_d_bt");l.bd.setAttribute("class","dard_d_bd");l.f.setAttribute("class","dard_d_f");l.m.innerHTML="&#95";l.mx.innerHTML="&square;";l.bt.innerHTML="&times;"}function K(L){if(L.keyIn("custom")){L.custom.keyIn("head")?l.h=L.custom.head:l.h=null;L.custom.keyIn("close")?l.bt=L.custom.close:l.bt=null;L.custom.keyIn("min")?l.m=L.custom.min:l.m=null;L.custom.keyIn("max")?l.mx=L.custom.max:l.mx=null;L.custom.keyIn("body")?l.bd=L.custom.body:l.bd=null;L.custom.keyIn("footer")?l.f=L.custom.footer:l.f=null;document.body.appendChild(L.custom.wrapper)}else{if(!L.keyIn("custom")){H();G();document.body.appendChild(l.d)}}}function I(L){K(L);return[l.d,l.h,l.bt,l.m,l.mx,l.bd,l.f]}return I(J)}function s(G){if(G.keyIn("onside")){if(isBool(G.onside)&&G.onside==true){l.t=document.createElement("div");l.t.setAttribute("class","dialog-toggle");l.t.innerHTML="+";document.body.appendChild(l.t)}else{if(isObj(G.onside)){l.t=G.onside;document.body.appendChild(l.t)}}}}function C(J,K){if(K.keyIn("css")){var I=K.css}if(isArray(K)){var I=K}if(I){for(var H=0,G=J.length;H<G;H++){if(typeof I[H]==="string"&&I[H].lenght>1){J[H].removeAttribute("class")}J[H].setAttribute("class",I[H])}}}function z(G,H){if(H.keyIn("body")){if(typeof H.body==="string"){G.appendChild(str2el(H.body))}if(typeof H.body=="object"){G.appendChild(H.body)}}}function h(G,H){if(H.keyIn("title")){var I=document.createElement("h4");I.appendChild(document.createTextNode(H.title));G.appendChild(I)}}function i(G){emptyEl(G)}function d(I){if(I.keyIn("acton")){for(var H=0,G=I.acton.myevent.length;H<G;H++){$(I.acton.trigger[H]).addEventListener(I.acton.myevent[H],I.acton.handler[H],false)}}}function j(){if(m.keyIn("transform")){if(l.d.className===m.transform[0]){C([l.d,l.h,l.bt,l.m,l.mx,l.bd,l.f],m);if(l.t){l.t.style.display="none"}}}else{l.d.style.display="block";if(l.t){l.t.style.display="none"}}}function c(G){if(m.keyIn("transform")){if(l.d.className===m.css[0]||l.d.className==="dard_d_box"){C([l.d,l.h,l.bd,l.f],m.transform);if(l.t){l.t.style.display="block"}}}else{l.d.style.display="none";if(l.t){l.t.style.display="block"}}}function n(G){var H=G.targetTouches[0];l.d.style.left=H.pageX-20+"px";l.d.style.top=H.pageY-20+"px";G.preventDefault()}function f(H,G){return window.getComputedStyle(H,null).getPropertyValue(G)}function B(G){window.addEventListener("mousemove",p,true);y=G.clientY-f(l.d,"top").slice(0,-2),x=G.clientX-f(l.d,"left").slice(0,-2)}function p(G){l.d.style.top=(G.clientY-y)+"px";l.d.style.left=(G.clientX-x)+"px"}function e(){window.removeEventListener("mousemove",p,true);window.removeEventListener("touchmove",n,true)}function D(){document.body.removeChild(l.d);a();A.reset();w();l.bt.removeEventListener("click",D,true);F();g()}function k(){if(l.t){l.t.addEventListener("click",j,false)}}function a(){if(l.t){document.body.removeChild(l.t);l.t.removeEventListener("click",j,true)}}function u(){if(l.m){l.m.addEventListener("click",c,false)}}function b(){if(l.mx){l.mx.addEventListener("click",j,false)}}function F(){if(l.m){l.m.removeEventListener("click",c,true)}}function g(){if(l.mx){l.mx.removeEventListener("click",j,true)}}function r(){if(v){l.f.addEventListener("mousedown",B,false);l.h.addEventListener("mousedown",B,false);window.addEventListener("mouseup",e,false);l.h.addEventListener("touchmove",n,false);window.addEventListener("touchend",e,false)}}function w(){if(v){l.h.removeEventListener("mousedown",B,true);l.f.removeEventListener("mousedown",B,true);window.removeEventListener("mouseup",e,true);window.removeEventListener("mousedown",e,true)}}function t(G,H){if(G){G.addEventListener("click",function(){if(A.show()<1){A.increment();s(H);var J=E(H),I,K;C(J,H);h(l.h,H);z(l.bd,H);k();b();u();l.bt.addEventListener("click",D,false);r();d(H)}})}else{console.log(G+" dialog button not on this page")}}t(o,m)};